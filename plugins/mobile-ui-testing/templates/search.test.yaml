# Search Test Template
# Tests search functionality

config:
  app: com.your.app.package  # TODO: Replace with your app package

setup:
  - terminate_app
  - launch_app
  - wait: 3s

teardown:
  - terminate_app

tests:
  - name: Basic search
    description: Search returns relevant results
    timeout: 60s
    tags: [search, smoke]
    steps:
      - wait_for: "Home"

      # Navigate to search
      - tap: "Search"
      - wait: 1s

      # Enter search query
      - tap: "Search..."  # Search input placeholder
      - type:
          text: "test query"
          submit: true

      - wait_for:
          element: "Results"
          timeout: 10s

      - verify_screen: "Search results displayed"
      - screenshot: search_results

  - name: Search with no results
    description: Empty state shown for no results
    timeout: 60s
    tags: [search]
    steps:
      - wait_for: "Home"
      - tap: "Search"
      - wait: 1s

      - tap: "Search..."
      - type:
          text: "xyznonexistent123"
          submit: true

      - wait: 2s
      - verify_screen: "No results found message"
      - screenshot: search_no_results

  - name: Clear search
    description: User can clear search and see default state
    timeout: 60s
    tags: [search]
    steps:
      - wait_for: "Home"
      - tap: "Search"
      - wait: 1s

      - tap: "Search..."
      - type: "test"
      - wait: 1s

      # Clear search (adjust based on your UI)
      - if_present: "Clear"
        then:
          - tap: "Clear"
          - wait: 500ms
        else:
          # Alternative: clear with backspace
          - repeat:
              times: 10
              steps:
                - press: back

      - verify_screen: "Search field cleared"

  - name: Search filters
    description: User can filter search results
    timeout: 90s
    tags: [search]
    steps:
      - wait_for: "Home"
      - tap: "Search"
      - wait: 1s

      - tap: "Search..."
      - type:
          text: "product"
          submit: true

      - wait: 2s

      # Apply filter
      - tap: "Filter"
      - wait: 500ms

      - tap: "Category"
      - wait: 500ms
      - tap: "Electronics"  # Example filter
      - wait: 500ms

      - tap: "Apply"
      - wait: 2s

      - verify_screen: "Filtered search results"
      - screenshot: filtered_results

  - name: Search suggestions
    description: Suggestions appear while typing
    timeout: 60s
    tags: [search]
    steps:
      - wait_for: "Home"
      - tap: "Search"
      - wait: 1s

      - tap: "Search..."
      - type: "app"  # Partial query

      - wait: 1s
      - verify_screen: "Search suggestions displayed"

      # Tap a suggestion
      - if_present: "apple"
        then:
          - tap: "apple"
          - wait: 2s
          - verify_screen: "Results for selected suggestion"
