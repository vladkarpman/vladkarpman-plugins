# Login Test Template
# Tests authentication flows

config:
  app: com.your.app.package  # TODO: Replace with your app package

setup:
  - terminate_app
  - launch_app
  - wait: 3s

teardown:
  - terminate_app

tests:
  - name: Successful login
    description: User can login with valid credentials
    timeout: 60s
    tags: [auth, smoke]
    steps:
      - wait_for: "Login"

      # Handle optional popups
      - if_present: "Allow Notifications"
        then:
          - tap: "Not Now"
          - wait: 500ms

      # Enter credentials
      - tap: "Email"
      - type: "user@example.com"  # TODO: Replace with test credentials

      - tap: "Password"
      - type: "password123"        # TODO: Replace with test credentials

      - tap: "Login"
      - wait: 2s

      - verify_screen: "Home screen after successful login"
      - screenshot: logged_in_state

  - name: Login with invalid credentials
    description: Error shown for invalid credentials
    timeout: 60s
    tags: [auth, negative]
    steps:
      - wait_for: "Login"

      - tap: "Email"
      - type: "invalid@example.com"

      - tap: "Password"
      - type: "wrongpassword"

      - tap: "Login"
      - wait: 2s

      - verify_contains: "Invalid"
      - screenshot: login_error_state

  - name: Forgot password flow
    description: User can request password reset
    timeout: 60s
    tags: [auth]
    steps:
      - wait_for: "Login"
      - tap: "Forgot Password"
      - wait: 1s

      - tap: "Email"
      - type: "user@example.com"

      - tap: "Send Reset Link"
      - wait: 2s

      - verify_screen: "Password reset email sent confirmation"
