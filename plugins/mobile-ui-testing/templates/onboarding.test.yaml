# Onboarding Test Template
# Tests first-time user onboarding flows

config:
  app: com.your.app.package  # TODO: Replace with your app package

setup:
  - terminate_app
  # Clear app data for fresh start (Android only)
  # Note: This requires adb shell access
  - launch_app
  - wait: 3s

teardown:
  - terminate_app

tests:
  - name: Complete onboarding flow
    description: New user completes full onboarding
    timeout: 180s
    tags: [onboarding, smoke]
    steps:
      # Welcome screen
      - wait_for: "Welcome"
      - screenshot: onboarding_welcome
      - verify_screen: "Welcome screen with app introduction"
      - tap: "Next"
      - wait: 1s

      # Feature highlights (adjust based on your app)
      - wait_for: "Features"
      - screenshot: onboarding_features
      - tap: "Next"
      - wait: 1s

      # Permissions (if applicable)
      - if_present: "Enable Notifications"
        then:
          - screenshot: onboarding_notifications
          - tap: "Enable"
          - wait: 1s
          # Handle system permission dialog
          - if_present: "Allow"
            then:
              - tap: "Allow"
              - wait: 500ms

      # Account setup (if applicable)
      - if_present: "Create Account"
        then:
          - screenshot: onboarding_account
          - tap: "Skip for now"
          - wait: 1s

      # Final step
      - wait_for: "Get Started"
      - screenshot: onboarding_final
      - tap: "Get Started"
      - wait: 2s

      - verify_screen: "Home screen after completing onboarding"
      - screenshot: onboarding_complete

  - name: Skip onboarding
    description: User can skip onboarding
    timeout: 60s
    tags: [onboarding]
    steps:
      - wait_for: "Welcome"

      # Look for skip option
      - if_present: "Skip"
        then:
          - tap: "Skip"
          - wait: 2s
          - verify_screen: "Home screen after skipping onboarding"
        else:
          # If no skip, complete normally
          - repeat:
              times: 10
              steps:
                - if_present: "Next"
                  then:
                    - tap: "Next"
                    - wait: 500ms
                - if_present: "Get Started"
                  then:
                    - tap: "Get Started"
                    - wait: 1s
                - if_present: "Skip"
                  then:
                    - tap: "Skip"
                    - wait: 500ms

  - name: Onboarding page indicators
    description: Verify pagination dots work
    timeout: 90s
    tags: [onboarding]
    steps:
      - wait_for: "Welcome"

      # Swipe through pages
      - swipe: left
      - wait: 500ms
      - screenshot: onboarding_page_2

      - swipe: left
      - wait: 500ms
      - screenshot: onboarding_page_3

      # Swipe back
      - swipe: right
      - wait: 500ms
      - verify_screen: "Second onboarding page"
